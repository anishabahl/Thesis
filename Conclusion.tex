\chapter{Conclusions and future work}
\label{chap:conclusion}
\minitoc
\section{Conclusions and summary of contributions}
Chapter~\ref{chap:intro} introduced the necessity for a quantitative, spatially resolved, intra-operative method of $StO_2$ extraction for neurosurgery and presented HSI as a possible means of achieving this. This thesis has presented a method to acquire spectrally sound hyperspectral data from intra-operative imaging using sterile methods and investigated the performance of some key analytical models for the extraction of $StO_2$. 

Chapter~\ref{chap:SWB} demonstrated the necessity for intra-operative white balancing due to the impact of changed positions or light sources on the quality of data reconstruction, and also proposed a novel white-balancing algorithm for use in sterile environments. It is demonstrated that this method can be used to provide quantitative data, with a simplified format providing relative data which reproduces the standard non-sterile method with high quantitative accuracy. This allows for high quality HSI data collection intra-operatively with minimal disruption to the surgical workflow. 

Chapters~\ref{chap:1layer} and \ref{chap:2layer} evaluate the prominent single and double layer analytical tissue models respectively using both simulated and measured spectra. These chapters demonstrated that the Yudovsky 2009 and Jacques 1999 single-layer models were highly effective in analysing data for homogeneous semi-infinite tissues, whilst the Modified Beer-Lambert single-layer model and Yudovsky 2009 double-layer models should be used with caution. 

Finally, Chapter~\ref{chap:HSImodel} showed the impact of reducing the spectral resolution and adding noise to the spectra. It is shown that the simplistic camera simulation may not be fully capturing the behaviour of the snapshot mosaic HSI sensor used. The chapter also demonstrates the importance of minimising noise in measurements designed for use with these models to maintain high quality parameter extraction. The initial applications to neurosurgical hyperspectral data in this chapter highlight the lack of known ground truth values for these tissues and the necessity for validation of the optical modelling of these tissues. This presents a promising start to using analytical models to extract physiologically relevant parameters from neurosurgical HSI data. 

\section{Future work}
Various avenues of future research have been identified in each chapter conclusion with this section highlighting the most notable of these. 

\subsection{Computational processing improvements}
Both the novel synthetic white balancing algorithm in Chapter~\ref{chap:SWB} and the pixel-by-pixel processing in Chapter~\ref{chap:HSImodel} could benefit from improved computational processing times for better integration into surgical workflow. In both cases, parallelisation using GPU processing could be utilised to shorten the time required for these tasks. The processing in Chapter~\ref{chap:HSImodel} could also be improved further by utilising deep learning methods. After validation of high quality results using an analytical model, the model could be used to generate training data for training of a neural network. This could result in a neural network capable of providing similar quality results in a much shorter processing time. This network, however, will not be able to exceed the quality of the model used to provide the training data and so the results using the analytical models themselves should first be improved. 

\subsection{Broadening possible applications}
Much of the work in this thesis could be further developed for wider application. The novel algorithm presented in Chapter~\ref{chap:SWB} should be tested for robust behaviour with changing background in the short ruler video to ensure the ruler detection step is appropriate in this use case. This would enable the camera to be moved relative to the ruler enabling a wider range of neurosurgical applications. There should also be validation for a variety of operating scopes and a wider range of operating distances which may be used in other types of surgical procedures. Similarly, the analytical models presented in Chapters~\ref{chap:1layer} and \ref{chap:2layer} should undergo analysis in different wavelength ranges that may be suitable for different measurement configurations. 

Further flexibility should be included in the synthetic white balancing algorithm developed in Chapter~\ref{chap:SWB} to enable the modelling of dust particles within the optical system by including a more complex vignetting profile beyond the simple isotropic Gaussian presented in this work. The principle of spatial and spectral separability on which this algorithm has been developed is valid only in the setting of a single light source with spectral uniformity. To account for non-uniform or multiple light sources, the modelling of spatial and spectral interactions should be developed. Similarly, the gelatin-based phantoms presented in Chapter~\ref{chap:1layer} could be developed further to allow for other use cases. Some potential investigation could include understanding the influence of the medium on the extinction coefficient of dyes, development of spatially non-uniform phantoms with known ground truth, use of further chromophores, and inclusion of more complex structures such as layered tissues or vessels with which to test more complex analytical models such as that presented in Chapter~\ref{chap:2layer}. 

\subsection{Improvement in HSI parameter extraction}
Chapter~\ref{chap:HSImodel} demonstrates the importance of noise reduction in HSI data collection in order to obtain precise parameter extraction. For this reason, the snapshot hyperspectral imaging system and data processing presented in Chapters~\ref{chap:SWB} and \ref{chap:HSImodel} should be improved to reduce noise in the acquired hypercubes. To aid the fitting process, the optimal central wavelengths of the bands should be identified alongside the optimal number of bands whilst retaining low acquisition times. Testing of the models investigated with intra-operative snapshot hyperspectral data should also be carried out to understand the quality of parameter extraction with this imaging system. 

Finally, Chapter~\ref{chap:1layer} demonstrates the rapid decline in parameter extraction quality with small imperfections in the absorbance and scattering models input. For this reason, the validation of the optical absorbance and scattering models used for biological tissue is likely a key avenue of future study to improve parameter extraction quality using these methods. This could include use of inverse Monte Carlo, inverse Adding Doubling, or deep learning methods to calculate ground truth absorption and scattering coefficients of healthy brain tissues. Whilst this work has begun, it has not been compared to current optical modelling with standard parameter values to determine the accuracy of these~\citep{Sabino2016, Eggert1987, Shapey2022, Hokr2021}. There could also be further research into the chromophores included in these models; this could include measurement of a wider range of chromophores (such as lipids which do not have prominent measurements from human samples), potential interactions between biological components which could affect the spectra similarly to that seen in Chapter~\ref{chap:1layer}, and the measurement of biological chromophores in media that more closely replicates that of biological tissue as this can impact the extinction coefficients as seen in Chapter~\ref{chap:1layer}.